var C=Object.defineProperty;var k=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var f=(r,e,t)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e)=>{for(var t in e||(e={}))E.call(e,t)&&f(r,t,e[t]);if(k)for(var t of k(e))j.call(e,t)&&f(r,t,e[t]);return r};var v=(r,e,t)=>(f(r,typeof e!="symbol"?e+"":e,t),t);import{l as D,j as h,r as d,R as L,a as N}from"./vendor.881ec769.js";const F=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};F();class O extends Error{constructor(e,t){var s;let a=e;t&&!e&&(a=t.message);super(a);v(this,"logged");t&&t.stack&&(this.stack=t.stack),this.stack=(s=this.stack)==null?void 0:s.replace(/^(Error)/,`$1 (${this.constructor.name})`),this.logged=!1}}const x="PBKDF2",H=25e4,M="SHA-256",m="AES-GCM";function S(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function P(r){return btoa([...new Uint8Array(r)].map(e=>String.fromCharCode(e)).join(""))}class U extends O{}async function G(r,e){try{const t=S(e),a=S(r),s=a.slice(0,16),n=a.slice(16).buffer,i=await crypto.subtle.importKey("raw",t,{length:t.length,name:m},!1,["decrypt"]),l=await crypto.subtle.decrypt({name:m,iv:s},i,n);if(!l)throw new Error("Unable to decrypt data.");return D.decompress(new Uint8Array(l))}catch(t){throw new U(void 0,t)}}async function R(r,e){const t=new TextEncoder,a=t.encode(e),s=t.encode(r),n=await crypto.subtle.importKey("raw",s,{length:s.length,name:x},!1,["deriveKey"]),i=await crypto.subtle.deriveKey({name:x,salt:a,iterations:H,hash:M},n,{name:m,length:256},!0,["encrypt","decrypt"]),l=await crypto.subtle.exportKey("raw",i);return P(new Uint8Array(l))}const o=h.exports.jsx,u=h.exports.jsxs,$=h.exports.Fragment;function T(){const[r,e]=d.exports.useState(""),[t,a]=d.exports.useState(""),[s,n]=d.exports.useState([]),[i,l]=d.exports.useState(!1);async function p(c,y){var g;l(!0);try{const{bookmarks:w}=await(await fetch(`https://api.xbrowsersync.org/bookmarks/${c}`)).json(),K=await G(w,y),B=JSON.parse(K);n(((g=B[0])==null?void 0:g.children)||[])}catch{}l(!1)}d.exports.useEffect(()=>{const c=localStorage.getItem("syncId"),y=localStorage.getItem("password");!c||!y||(e(c),p(c,y))},[]);async function A(){const c=await R(t,r);localStorage.setItem("password",c),localStorage.setItem("syncId",r),p(r,c)}return u("div",{children:[u("div",{children:[o("span",{children:"syncId:"}),o("input",{value:r,onChange:c=>e(c.target.value)})]}),u("div",{children:[o("span",{children:"password:"}),o("input",{value:t,onChange:c=>a(c.target.value)})]}),o("button",{disabled:!r||!t||i,onClick:A,children:"Save"}),s&&o(I,{items:s})]})}function I({items:r}){return o($,{children:r.map(e=>e.children?o(z,{item:e}):o("div",{className:"item",children:o(q,b({},e))}))})}const q=({url:r,title:e})=>o("a",{href:r,target:"_blank",rel:"noreferrer",children:e}),z=({item:r})=>{const[e,t]=d.exports.useState(!1);return u("div",{className:"folder",children:[u("div",{onClick:()=>t(!e),children:[o("span",{className:"handler","data-collapsed":e?"true":"false"}),o("span",{children:r.title})]}),e?null:o(I,{items:r.children})]})};L.render(o(N.StrictMode,{children:o(T,{})}),document.getElementById("root"));
